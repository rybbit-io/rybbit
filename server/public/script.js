"use strict";(()=>{var H,Q=-1,S=function(n){addEventListener("pageshow",function(e){e.persisted&&(Q=e.timeStamp,n(e))},!0)},V=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},R=function(){var n=V();return n&&n.activationStart||0},h=function(n,e){var a=V(),r="navigate";return Q>=0?r="back-forward-cache":a&&(r=document.prerendering||R()>0?"prerender":a.type.replace(/_/g,"-")),{name:n,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},L=function(n,e,a){try{if(PerformanceObserver.supportedEntryTypes.includes(n)){var r=new PerformanceObserver(function(s){e(s.getEntries())});return r.observe(Object.assign({type:n,buffered:!0},a||{})),r}}catch{}},D=function(n,e){var a=function r(s){s.type!=="pagehide"&&document.visibilityState!=="hidden"||(n(s),e&&(removeEventListener("visibilitychange",r,!0),removeEventListener("pagehide",r,!0)))};addEventListener("visibilitychange",a,!0),addEventListener("pagehide",a,!0)},y=function(n,e,a,r){var s,o;return function(f){e.value>=0&&(f||r)&&((o=e.value-(s||0))||s===void 0)&&(s=e.value,e.delta=o,e.rating=function(d,p){return d>p[1]?"poor":d>p[0]?"needs-improvement":"good"}(e.value,a),n(e))}},A=-1,$=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},z=function(){D(function(n){var e=n.timeStamp;A=e},!0)},X=function(){return A<0&&(A=$(),z(),S(function(){setTimeout(function(){A=$(),z()},0)})),{get firstHiddenTime(){return A}}},q=function(n,e){e=e||{};var a,r=[1800,3e3],s=X(),o=h("FCP"),f=function(l){l.forEach(function(u){u.name==="first-contentful-paint"&&(p&&p.disconnect(),u.startTime<s.firstHiddenTime&&(o.value=u.startTime-R(),o.entries.push(u),a(!0)))})},d=window.performance&&window.performance.getEntriesByName&&window.performance.getEntriesByName("first-contentful-paint")[0],p=d?null:L("paint",f);(d||p)&&(a=y(n,o,r,e.reportAllChanges),d&&f([d]),S(function(l){o=h("FCP"),a=y(n,o,r,e.reportAllChanges),requestAnimationFrame(function(){requestAnimationFrame(function(){o.value=performance.now()-l.timeStamp,a(!0)})})}))},J=!1,x=-1,Z=function(n,e){e=e||{};var a=[.1,.25];J||(q(function(u){x=u.value}),J=!0);var r,s=function(u){x>-1&&n(u)},o=h("CLS",0),f=0,d=[],p=function(u){u.forEach(function(g){if(!g.hadRecentInput){var T=d[0],N=d[d.length-1];f&&g.startTime-N.startTime<1e3&&g.startTime-T.startTime<5e3?(f+=g.value,d.push(g)):(f=g.value,d=[g]),f>o.value&&(o.value=f,o.entries=d,r())}})},l=L("layout-shift",p);l&&(r=y(s,o,a,e.reportAllChanges),D(function(){p(l.takeRecords()),r(!0)}),S(function(){f=0,x=-1,o=h("CLS",0),r=y(s,o,a,e.reportAllChanges)}))};var tt=0,B=1/0,O=0,ut=function(n){n.forEach(function(e){e.interactionId&&(B=Math.min(B,e.interactionId),O=Math.max(O,e.interactionId),tt=O?(O-B)/7+1:0)})},et=function(){return H?tt:performance.interactionCount||0},lt=function(){"interactionCount"in performance||H||(H=L("event",ut,{type:"event",buffered:!0,durationThreshold:0}))},nt=0,G=function(){return et()-nt},v=[],U={},Y=function(n){var e=v[v.length-1],a=U[n.interactionId];if(a||v.length<10||n.duration>e.latency){if(a)a.entries.push(n),a.latency=Math.max(a.latency,n.duration);else{var r={id:n.interactionId,latency:n.duration,entries:[n]};U[r.id]=r,v.push(r)}v.sort(function(s,o){return o.latency-s.latency}),v.splice(10).forEach(function(s){delete U[s.id]})}},rt=function(n,e){e=e||{};var a=[200,500];lt();var r,s=h("INP"),o=function(d){d.forEach(function(u){u.interactionId&&Y(u),u.entryType==="first-input"&&!v.some(function(g){return g.entries.some(function(T){return u.duration===T.duration&&u.startTime===T.startTime})})&&Y(u)});var p,l=(p=Math.min(v.length-1,Math.floor(G()/50)),v[p]);l&&l.latency!==s.value&&(s.value=l.latency,s.entries=l.entries,r())},f=L("event",o,{durationThreshold:e.durationThreshold||40});r=y(n,s,a,e.reportAllChanges),f&&(f.observe({type:"first-input",buffered:!0}),D(function(){o(f.takeRecords()),s.value<0&&G()>0&&(s.value=0,s.entries=[]),r(!0)}),S(function(){v=[],nt=et(),s=h("INP"),r=y(n,s,a,e.reportAllChanges)}))},W={},at=function(n,e){e=e||{};var a,r=[2500,4e3],s=X(),o=h("LCP"),f=function(l){var u=l[l.length-1];if(u){var g=u.startTime-R();g<s.firstHiddenTime&&(o.value=g,o.entries=[u],a())}},d=L("largest-contentful-paint",f);if(d){a=y(n,o,r,e.reportAllChanges);var p=function(){W[o.id]||(f(d.takeRecords()),d.disconnect(),W[o.id]=!0,a(!0))};["keydown","click"].forEach(function(l){addEventListener(l,p,{once:!0,capture:!0})}),D(p,!0),S(function(l){o=h("LCP"),a=y(n,o,r,e.reportAllChanges),requestAnimationFrame(function(){requestAnimationFrame(function(){o.value=performance.now()-l.timeStamp,W[o.id]=!0,a(!0)})})})}},dt=function n(e){document.prerendering?addEventListener("prerenderingchange",function(){return n(e)},!0):document.readyState!=="complete"?addEventListener("load",function(){return n(e)},!0):setTimeout(e,0)},it=function(n,e){e=e||{};var a=[800,1800],r=h("TTFB"),s=y(n,r,a,e.reportAllChanges);dt(function(){var o=V();if(o){if(r.value=Math.max(o.responseStart-R(),0),r.value<0||r.value>performance.now())return;r.entries=[o],s(!0),S(function(){r=h("TTFB",0),(s=y(n,r,a,e.reportAllChanges))(!0)})}})};(function(){let n=document.currentScript,e=n?.getAttribute("src")?.split("/script.js")[0];if(window.__RYBBIT_OPTOUT__||localStorage.getItem("disable-rybbit")!==null){window.rybbit={pageview:()=>{},event:()=>{},trackOutbound:()=>{},identify:()=>{},clearUserId:()=>{},getUserId:()=>null};return}if(!e){console.error("Please provide a valid analytics host");return}let a=n.getAttribute("data-site-id")||n.getAttribute("site-id");if(!a||isNaN(Number(a))){console.error("Please provide a valid site ID using the data-site-id attribute");return}let r=n.getAttribute("data-debounce")?Math.max(0,parseInt(n.getAttribute("data-debounce")||"0")):500,s=n.getAttribute("data-auto-track-pageview")!=="false",o=n.getAttribute("data-track-spa")!=="false",f=n.getAttribute("data-track-query")!=="false",d=n.getAttribute("data-track-outbound")!=="false",p=[];try{let t=n.getAttribute("data-skip-patterns");t&&(p=JSON.parse(t),Array.isArray(p)||(p=[]))}catch(t){console.error("Error parsing data-skip-patterns:",t)}let l=[];try{let t=n.getAttribute("data-mask-patterns");t&&(l=JSON.parse(t),Array.isArray(l)||(l=[]))}catch(t){console.error("Error parsing data-mask-patterns:",t)}let u=null;try{let t=localStorage.getItem("rybbit-user-id");t&&(u=t)}catch{}function g(t){let i="__DOUBLE_ASTERISK_TOKEN__",c="__SINGLE_ASTERISK_TOKEN__",b=t.replace(/\*\*/g,i).replace(/\*/g,c).replace(/[.+?^${}()|[\]\\]/g,"\\$&");b=b.replace(/\//g,"\\/");let M=b.replace(new RegExp(i,"g"),".*").replace(new RegExp(c,"g"),"[^/]+");return new RegExp("^"+M+"$")}function T(t,i){for(let c of i)try{if(g(c).test(t))return c}catch(m){console.error(`Invalid pattern: ${c}`,m)}return null}function N(t,i){let c;return(...m)=>{clearTimeout(c),c=setTimeout(()=>t.apply(this,m),i)}}function ot(t){try{let i=window.location.hostname,c=new URL(t).hostname;return c!==i&&c!==""}catch{return!1}}let K=()=>{let t=new URL(window.location.href),i=t.pathname;if(t.hash&&t.hash.startsWith("#/")&&(i=t.hash.substring(1)),T(i,p))return null;let c=T(i,l);c&&(i=c);let m={site_id:a,hostname:t.hostname,pathname:i,querystring:f?t.search:"",screenWidth:window.innerWidth,screenHeight:window.innerHeight,language:navigator.language,page_title:document.title,referrer:document.referrer};return u&&(m.user_id=u),m},j=t=>{fetch(`${e}/track`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),mode:"cors",keepalive:!0}).catch(console.error)},k=(t="pageview",i="",c={})=>{if(t==="custom_event"&&(!i||typeof i!="string")){console.error("Event name is required and must be a string for custom events");return}let m=K();if(!m)return;let b={...m,type:t,event_name:i,properties:t==="custom_event"||t==="outbound"?JSON.stringify(c):void 0};j(b)},w={lcp:null,cls:null,inp:null,fcp:null,ttfb:null},E=!1,P=null,st=()=>{if(E)return;Object.values(w).every(i=>i!==null)&&F()},F=()=>{if(E)return;E=!0,P&&(clearTimeout(P),P=null);let t=K();if(!t)return;let i={...t,type:"performance",event_name:"web-vitals",lcp:w.lcp,cls:w.cls,inp:w.inp,fcp:w.fcp,ttfb:w.ttfb};j(i)},I=t=>{E||(w[t.name.toLowerCase()]=t.value,st())},ct=()=>{try{at(I),Z(I),rt(I),q(I),it(I),P=setTimeout(()=>{E||F()},2e4),window.addEventListener("beforeunload",()=>{E||F()})}catch(t){console.warn("Error initializing web vitals tracking:",t)}},_=()=>k("pageview"),C=r>0?N(_,r):_;if(document.addEventListener("click",function(t){let i=t.target;for(;i&&i instanceof HTMLElement&&i!==document.documentElement;){if(i.hasAttribute("data-rybbit-event")){let c=i.getAttribute("data-rybbit-event");if(c){let m={};for(let b of i.attributes)if(b.name.startsWith("data-rybbit-prop-")){let M=b.name.replace("data-rybbit-prop-","");m[M]=b.value}k("custom_event",c,m)}break}i=i.parentElement}if(d){let c=t.target&&t.target instanceof HTMLElement?t.target.closest("a"):null;if(!c||!c.href)return;ot(c.href)&&k("outbound","",{url:c.href,text:c.innerText||c.textContent||"",target:c.target||"_self"})}}),o){let t=history.pushState,i=history.replaceState;history.pushState=function(...c){t.apply(this,c),C()},history.replaceState=function(...c){i.apply(this,c),C()},window.addEventListener("popstate",C),window.addEventListener("hashchange",C)}window.rybbit={pageview:_,event:(t,i={})=>k("custom_event",t,i),trackOutbound:(t,i="",c="_self")=>k("outbound","",{url:t,text:i,target:c}),identify:t=>{if(typeof t!="string"||t.trim()===""){console.error("User ID must be a non-empty string");return}u=t.trim();try{localStorage.setItem("rybbit-user-id",u)}catch{console.warn("Could not persist user ID to localStorage")}},clearUserId:()=>{u=null;try{localStorage.removeItem("rybbit-user-id")}catch{}},getUserId:()=>u},s&&_(),ct()})();})();
